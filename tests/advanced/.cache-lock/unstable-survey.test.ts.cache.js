/**
 * @generated
 * This file was generated by Donobu; do not edit manually.
 */
/* eslint-disable */
const { expect } = require('donobu');

module.exports = {
  caches: [
    {
      pageUrl: 'unstable-survey-dinoer.replit.app',
      instruction:
        'Fill out the all of the survey questions with fake data go through\nthe submission process until you get to a "Thank You" page.',
      schema: {
        $schema: 'https://json-schema.org/draft/2020-12/schema',
        type: 'object',
        properties: {
          surveyData: {
            type: 'array',
            items: {
              type: 'object',
              properties: {
                question: { type: 'string' },
                response: { type: 'string' },
              },
              required: ['question', 'response'],
              additionalProperties: false,
            },
          },
        },
        required: ['surveyData'],
        additionalProperties: false,
      },
      allowedTools: [],
      maxToolCalls: 50,
      run: async ({ page }) => {
        // Filling in the last name field with fake data to progress through the survey.
        await page
          .find('#\\:r0\\:-form-item', {
            failover: [
              "[data-testid='input-lastname']",
              ".//label[normalize-space()='Last Name *']/following-sibling::input",
            ],
          })
          .inputText('Smith');

        // Filling in the email address field with a randomized fake email.
        await page
          .find('#\\:r1\\:-form-item', {
            failover: [
              ".//label[normalize-space()='Email Address *']/following-sibling::input",
              "[name='email']",
            ],
          })
          .inputRandomizedEmailAddress('fakeuser@example.com');

        // Selecting an age group as part of filling out the survey questions.
        await page
          .find('#\\:r5\\:-form-item', {
            failover: [
              "[data-testid='radio-age-25-34']",
              "div:nth-of-type(2) > [role='radio']",
            ],
          })
          .click();

        // Scrolling down to reveal more survey questions and the next button.
        await page.find('html').scroll('DOWN');

        // Selecting 'Social Media' for the question 'How did you hear about us?' to continue with the survey.
        await page
          .find('#\\:re\\:-form-item', {
            failover: [
              "div:nth-of-type(1) > [role='checkbox']",
              "div:nth-of-type(2) > div:nth-of-type(1) > [data-state='unchecked']",
            ],
          })
          .click();

        // Adding a fake comment to the optional additional comments field.
        await page
          .find('#\\:ri\\:-form-item', {
            failover: [
              ".//label[normalize-space()='Additional Comments (Optional)']/following-sibling::textarea",
              "[name='comments']",
            ],
          })
          .inputText('This is a great survey!');

        // Clicking the 'Next' button to proceed to the next section of the survey.
        await page
          .find(".//button[normalize-space(.)='Next']", {
            failover: ['button.inline-flex', 'div.mt-8 > button'],
          })
          .click();

        // Clicking the 'Submit' button to finalize the survey submission.
        await page
          .find(".//button[normalize-space(.)='Submit']", {
            failover: [
              'div.mt-8 > button:nth-of-type(2)',
              'div.bg-white > div:nth-of-type(2) > button:nth-of-type(2)',
            ],
          })
          .click();

        // The objective was to reach the "Thank You" page after submitting the survey, which has been achieved.
        await page.run('markObjectiveComplete', {
          details:
            'The survey was filled out with fake data, submitted, and the "Thank You" page has been reached.',
        });
      },
    },
  ],
};
